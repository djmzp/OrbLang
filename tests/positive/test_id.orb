import "util/io.orb";

fnc main () () {
    sym p:i32;

    sym (x 100);
    println_i32 (\x);

    = x 101;
    eval (sym (id0 \x));
    println_i32 (id0);

    = x 102;
    eval (sym (id1 \id0));
    println_i32 ((id1));

    eval (= id0 \a);
    = p 200;
    eval (block {
        exit (== id0 \a);
        = p -1;
    });
    println_i32 p;

    = p 201;
    eval (block {
        exit (!= id0 \b);
        = p -1;
    });
    println_i32 p;

    eval (= id0 (+ \a \b));
    sym ((eval id0) 300);
    println_i32 (id0);

    eval (= id0 (cast id false));
    sym ((eval id0) 301);
    println_i32 (id0);

    eval (= id0 (cast id true));
    sym ((eval id0) 302);
    println_i32 (id0);

    eval (= id0 (cast id 0:u32));
    sym ((eval id0) 303);
    println_i32 (id0);

    eval (= id0 (cast id 999:u32));
    sym ((eval id0) 304);
    println_i32 (id0);

    eval (= id0 (cast id i32));
    sym ((eval id0) 305);
    println_i32 (id0);

    eval (= id0 (cast id (i32 * [] 4)));
    sym ((eval id0) 306);
    println_i32 (id0);

    eval (= id0 (cast id (i32 cn * cn [] 4)));
    sym ((eval id0) 307);
    println_i32 (id0);

    eval (= id0 (cast id (i32 u32 bool id type)));
    sym ((eval id0) 308);
    println_i32 (id0);

    eval (= id0
        (+
            \a
            (cast id false)
            (cast id true)
            (cast id 0:u32)
            (cast id 999:u32)
            (cast id i32)
            (cast id (i32 * [] 4))
            (cast id (i32 cn * cn [] 4))
            (cast id (i32 u32 bool id type))));
    sym ((eval id0) 309);
    println_i32 (id0);

    sym (a=+-*/%<>&|^!~[]._?0123456789:i32 400);
    println_i32 a=+-*/%<>&|^!~[]._?0123456789;
};