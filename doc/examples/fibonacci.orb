import "base.orb";
import "clib.orb";

fnc fibonacci::evaluable (n:i32) u64 {
    if (< n 2) {
        ret (cast u64 n);
    };

    sym (a:(u64 3));
    = ([] a 0) 0;
    = ([] a 1) 1;

    times (- n 1) {
        = ([] a 2) (+ ([] a 0) ([] a 1));
        
        = ([] a 0) ([] a 1);
        = ([] a 1) ([] a 2);
    };

    ret ([] a 2);
};

fnc main () () {
    printf "%lld\n" (fibonacci 20); # 6765
};